import{k as O,l as S,m as D,n as L,a as W,j as $}from"./@babel.578f1fd2.js";import{r as t}from"./react.c0c1c8db.js";import{s as j,f as A,J as H,t as F}from"./rc-util.5178b2f6.js";import{i as J}from"./resize-observer-polyfill.8deb1e21.js";var c=new Map;function K(e){e.forEach(function(o){var r,n=o.target;(r=c.get(n))===null||r===void 0||r.forEach(function(i){return i(n)})})}var M=new J(K);function T(e,o){c.has(e)||(c.set(e,new Set),M.observe(e)),c.get(e).add(o)}function V(e,o){c.has(e)&&(c.get(e).delete(o),c.get(e).size||(M.unobserve(e),c.delete(e)))}var X=function(e){O(r,e);var o=S(r);function r(){return D(this,r),o.apply(this,arguments)}return L(r,[{key:"render",value:function(){return this.props.children}}]),r}(t.exports.Component),g=t.exports.createContext(null);function Y(e){var o=e.children,r=e.onBatchResize,n=t.exports.useRef(0),i=t.exports.useRef([]),s=t.exports.useContext(g),v=t.exports.useCallback(function(f,u,l){n.current+=1;var d=n.current;i.current.push({size:f,element:u,data:l}),Promise.resolve().then(function(){d===n.current&&(r==null||r(i.current),i.current=[])}),s==null||s(f,u,l)},[r,s]);return t.exports.createElement(g.Provider,{value:v},o)}function q(e){var o=e.children,r=e.disabled,n=t.exports.useRef(null),i=t.exports.useRef(null),s=t.exports.useContext(g),v=typeof o=="function",f=v?o(n):o,u=t.exports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),l=!v&&t.exports.isValidElement(f)&&j(f),d=l?f.ref:null,I=t.exports.useMemo(function(){return A(d,n)},[d,n]),m=t.exports.useRef(e);m.current=e;var C=t.exports.useCallback(function(a){var b=m.current,z=b.onResize,P=b.data,E=a.getBoundingClientRect(),R=E.width,x=E.height,h=a.offsetWidth,p=a.offsetHeight,_=Math.floor(R),k=Math.floor(x);if(u.current.width!==_||u.current.height!==k||u.current.offsetWidth!==h||u.current.offsetHeight!==p){var w={width:_,height:k,offsetWidth:h,offsetHeight:p};u.current=w;var B=h===Math.round(R)?R:h,N=p===Math.round(x)?x:p,y=W(W({},w),{},{offsetWidth:B,offsetHeight:N});s==null||s(y,a,P),z&&Promise.resolve().then(function(){z(y,a)})}},[]);return t.exports.useEffect(function(){var a=H(n.current)||H(i.current);return a&&!r&&T(a,C),function(){return V(a,C)}},[n.current,r]),t.exports.createElement(X,{ref:i},l?t.exports.cloneElement(f,{ref:I}):f)}var G="rc-observer-key";function Q(e){var o=e.children,r=typeof o=="function"?[o]:F(o);return r.map(function(n,i){var s=(n==null?void 0:n.key)||"".concat(G,"-").concat(i);return t.exports.createElement(q,$({},e,{key:s}),n)})}Q.Collection=Y;export{Q as R};
