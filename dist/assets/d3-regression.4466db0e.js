function z(t,o){return d(t)||k(t,o)||x()}function d(t){if(Array.isArray(t))return t}function k(t,o){var i=[],e=!0,r=!1,n=void 0;try{for(var u=t[Symbol.iterator](),f;!(e=(f=u.next()).done)&&(i.push(f.value),!(o&&i.length===o));e=!0);}catch(a){r=!0,n=a}finally{try{!e&&u.return!=null&&u.return()}finally{if(r)throw n}}return i}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function J(t,o,i,e){t=t.filter(function(w,b){var M=o(w,b),s=i(w,b);return M!=null&&isFinite(M)&&s!=null&&isFinite(s)}),e&&t.sort(function(w,b){return o(w)-o(b)});for(var r=t.length,n=new Float64Array(r),u=new Float64Array(r),f=0,a=0,l,h,m,g=0;g<r;)m=t[g],n[g]=l=+o(m,g,t),u[g]=h=+i(m,g,t),++g,f+=(l-f)/g,a+=(h-a)/g;for(var p=0;p<r;++p)n[p]-=f,u[p]-=a;return[n,u,f,a]}function G(t,o,i,e){for(var r=0,n=0,u=t.length;n<u;n++){var f=t[n],a=+o(f,n,t),l=+i(f,n,t);a!=null&&isFinite(a)&&l!=null&&isFinite(l)&&e(a,l,r++)}}function H(t,o,i,e,r){var n=0,u=0;return G(t,o,i,function(f,a){var l=a-r(f),h=a-e;n+=l*l,u+=h*h}),1-n/u}function R(t){return Math.atan2(t[1][1]-t[0][1],t[1][0]-t[0][0])*180/Math.PI}function nn(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}function O(t,o,i){for(var e=Math.log(o-t)*Math.LOG10E+1|0,r=1*Math.pow(10,-e/2-1),n=1e4,u=[a(t),a(o)],f=0;l(u)&&f<n;);return u;function a(h){return[h,i(h)]}function l(h){f++;for(var m=h.length,g=!1,p=0;p<m-1;p++){var w=h[p],b=h[p+1],M=nn([w,b]),s=a(M[0]),c=R([w,M]),v=R([w,s]),y=Math.abs(c-v);y>r&&(h.splice(p+1,0,s),g=!0)}return g}}function B(t,o,i,e){var r=e-t*t,n=Math.abs(r)<1e-24?0:(i-t*o)/r,u=o-n*t;return[u,n]}function ln(){var t=function(n){return n[0]},o=function(n){return n[1]},i;function e(r){var n=0,u=0,f=0,a=0,l=0,h=0,m=i?+i[0]:1/0,g=i?+i[1]:-1/0;G(r,t,o,function(v,y){var X=Math.log(y),I=v*y;++n,u+=(y-u)/n,a+=(I-a)/n,h+=(v*I-h)/n,f+=(y*X-f)/n,l+=(I*X-l)/n,i||(v<m&&(m=v),v>g&&(g=v))});var p=B(a/u,f/u,l/u,h/u),w=z(p,2),b=w[0],M=w[1];b=Math.exp(b);var s=function(y){return b*Math.exp(M*y)},c=O(m,g,s);return c.a=b,c.b=M,c.predict=s,c.rSquared=H(r,t,o,u,s),c}return e.domain=function(r){return arguments.length?(i=r,e):i},e.x=function(r){return arguments.length?(t=r,e):t},e.y=function(r){return arguments.length?(o=r,e):o},e}function rn(){var t=function(n){return n[0]},o=function(n){return n[1]},i;function e(r){var n=0,u=0,f=0,a=0,l=0,h=i?+i[0]:1/0,m=i?+i[1]:-1/0;G(r,t,o,function(c,v){++n,u+=(c-u)/n,f+=(v-f)/n,a+=(c*v-a)/n,l+=(c*c-l)/n,i||(c<h&&(h=c),c>m&&(m=c))});var g=B(u,f,a,l),p=z(g,2),w=p[0],b=p[1],M=function(v){return b*v+w},s=[[h,M(h)],[m,M(m)]];return s.a=b,s.b=w,s.predict=M,s.rSquared=H(r,t,o,f,M),s}return e.domain=function(r){return arguments.length?(i=r,e):i},e.x=function(r){return arguments.length?(t=r,e):t},e.y=function(r){return arguments.length?(o=r,e):o},e}function tn(t){t.sort(function(i,e){return i-e});var o=t.length/2;return o%1===0?(t[o-1]+t[o])/2:t[Math.floor(o)]}var U=2,V=1e-12;function sn(){var t=function(n){return n[0]},o=function(n){return n[1]},i=.3;function e(r){for(var n=J(r,t,o,!0),u=z(n,4),f=u[0],a=u[1],l=u[2],h=u[3],m=f.length,g=Math.max(2,~~(i*m)),p=new Float64Array(m),w=new Float64Array(m),b=new Float64Array(m).fill(1),M=-1;++M<=U;){for(var s=[0,g-1],c=0;c<m;++c){for(var v=f[c],y=s[0],X=s[1],I=v-f[y]>f[X]-v?y:X,A=0,S=0,L=0,j=0,F=0,P=1/Math.abs(f[I]-v||1),q=y;q<=X;++q){var E=f[q],Y=a[q],T=en(Math.abs(v-E)*P)*b[q],_=E*T;A+=T,S+=_,L+=Y*T,j+=Y*_,F+=E*_}var Z=B(S/A,L/A,j/A,F/A),K=z(Z,2),$=K[0],W=K[1];p[c]=$+W*v,w[c]=Math.abs(a[c]-p[c]),un(f,c+1,s)}if(M===U)break;var N=tn(w);if(Math.abs(N)<V)break;for(var C=0,D,Q;C<m;++C)D=w[C]/(6*N),b[C]=D>=1?V:(Q=1-D*D)*Q}return on(f,p,l,h)}return e.bandwidth=function(r){return arguments.length?(i=r,e):i},e.x=function(r){return arguments.length?(t=r,e):t},e.y=function(r){return arguments.length?(o=r,e):o},e}function en(t){return(t=1-t*t*t)*t*t}function un(t,o,i){var e=t[o],r=i[0],n=i[1]+1;if(!(n>=t.length))for(;o>r&&t[n]-e<=e-t[r];)i[0]=++r,i[1]=n,++n}function on(t,o,i,e){for(var r=t.length,n=[],u=0,f=0,a=[],l;u<r;++u)l=t[u]+i,a[0]===l?a[1]+=(o[u]-a[1])/++f:(f=0,a[1]+=e,a=[l,o[u]],n.push(a));return a[1]+=e,n}function vn(){var t=function(u){return u[0]},o=function(u){return u[1]},i=Math.E,e;function r(n){var u=0,f=0,a=0,l=0,h=0,m=e?+e[0]:1/0,g=e?+e[1]:-1/0,p=Math.log(i);G(n,t,o,function(y,X){var I=Math.log(y)/p;++u,f+=(I-f)/u,a+=(X-a)/u,l+=(I*X-l)/u,h+=(I*I-h)/u,e||(y<m&&(m=y),y>g&&(g=y))});var w=B(f,a,l,h),b=z(w,2),M=b[0],s=b[1],c=function(X){return s*Math.log(X)/p+M},v=O(m,g,c);return v.a=s,v.b=M,v.predict=c,v.rSquared=H(n,t,o,a,c),v}return r.domain=function(n){return arguments.length?(e=n,r):e},r.x=function(n){return arguments.length?(t=n,r):t},r.y=function(n){return arguments.length?(o=n,r):o},r.base=function(n){return arguments.length?(i=n,r):i},r}function fn(){var t=function(n){return n[0]},o=function(n){return n[1]},i;function e(r){var n=J(r,t,o),u=z(n,4),f=u[0],a=u[1],l=u[2],h=u[3],m=f.length,g=0,p=0,w=0,b=0,M=0,s,c,v,y;for(s=0;s<m;)c=f[s],v=a[s++],y=c*c,g+=(y-g)/s,p+=(y*c-p)/s,w+=(y*y-w)/s,b+=(c*v-b)/s,M+=(y*v-M)/s;var X=0,I=0,A=i?+i[0]:1/0,S=i?+i[1]:-1/0;G(r,t,o,function(T,_){I++,X+=(_-X)/I,i||(T<A&&(A=T),T>S&&(S=T))});var L=w-g*g,j=g*L-p*p,F=(M*g-b*p)/j,P=(b*L-M*p)/j,q=-F*g,E=function(_){return _=_-l,F*_*_+P*_+q+h},Y=O(A,S,E);return Y.a=F,Y.b=P-2*F*l,Y.c=q-P*l+F*l*l+h,Y.predict=E,Y.rSquared=H(r,t,o,X,E),Y}return e.domain=function(r){return arguments.length?(i=r,e):i},e.x=function(r){return arguments.length?(t=r,e):t},e.y=function(r){return arguments.length?(o=r,e):o},e}function hn(){var t=function(u){return u[0]},o=function(u){return u[1]},i=3,e;function r(n){if(i===1){var u=rn().x(t).y(o).domain(e)(n);return u.coefficients=[u.b,u.a],delete u.a,delete u.b,u}if(i===2){var f=fn().x(t).y(o).domain(e)(n);return f.coefficients=[f.c,f.b,f.a],delete f.a,delete f.b,delete f.c,f}var a=J(n,t,o),l=z(a,4),h=l[0],m=l[1],g=l[2],p=l[3],w=h.length,b=[],M=[],s=i+1,c=0,v=0,y=e?+e[0]:1/0,X=e?+e[1]:-1/0;G(n,t,o,function(E,Y){++v,c+=(Y-c)/v,e||(E<y&&(y=E),E>X&&(X=E))});var I,A,S,L,j;for(I=0;I<s;++I){for(S=0,L=0;S<w;++S)L+=Math.pow(h[S],I)*m[S];for(b.push(L),j=new Float64Array(s),A=0;A<s;++A){for(S=0,L=0;S<w;++S)L+=Math.pow(h[S],I+A);j[A]=L}M.push(j)}M.push(b);var F=cn(M),P=function(Y){Y-=g;var T=p+F[0]+F[1]*Y+F[2]*Y*Y;for(I=3;I<s;++I)T+=F[I]*Math.pow(Y,I);return T},q=O(y,X,P);return q.coefficients=an(s,F,-g,p),q.predict=P,q.rSquared=H(n,t,o,c,P),q}return r.domain=function(n){return arguments.length?(e=n,r):e},r.x=function(n){return arguments.length?(t=n,r):t},r.y=function(n){return arguments.length?(o=n,r):o},r.order=function(n){return arguments.length?(i=n,r):i},r}function an(t,o,i,e){var r=Array(t),n,u,f,a;for(n=0;n<t;++n)r[n]=0;for(n=t-1;n>=0;--n)for(f=o[n],a=1,r[n]+=f,u=1;u<=n;++u)a*=(n+1-u)/u,r[n-u]+=f*Math.pow(i,u)*a;return r[0]+=e,r}function cn(t){var o=t.length-1,i=[],e,r,n,u,f;for(e=0;e<o;++e){for(u=e,r=e+1;r<o;++r)Math.abs(t[e][r])>Math.abs(t[e][u])&&(u=r);for(n=e;n<o+1;++n)f=t[n][e],t[n][e]=t[n][u],t[n][u]=f;for(r=e+1;r<o;++r)for(n=o;n>=e;n--)t[n][r]-=t[n][e]*t[e][r]/t[e][e]}for(r=o-1;r>=0;--r){for(f=0,n=r+1;n<o;++n)f+=t[n][r]*i[n];i[r]=(t[o][r]-f)/t[r][r]}return i}function gn(){var t=function(n){return n[0]},o=function(n){return n[1]},i;function e(r){var n=0,u=0,f=0,a=0,l=0,h=0,m=i?+i[0]:1/0,g=i?+i[1]:-1/0;G(r,t,o,function(v,y){var X=Math.log(v),I=Math.log(y);++n,u+=(X-u)/n,f+=(I-f)/n,a+=(X*I-a)/n,l+=(X*X-l)/n,h+=(y-h)/n,i||(v<m&&(m=v),v>g&&(g=v))});var p=B(u,f,a,l),w=z(p,2),b=w[0],M=w[1];b=Math.exp(b);var s=function(y){return b*Math.pow(y,M)},c=O(m,g,s);return c.a=b,c.b=M,c.predict=s,c.rSquared=H(r,t,o,h,s),c}return e.domain=function(r){return arguments.length?(i=r,e):i},e.x=function(r){return arguments.length?(t=r,e):t},e.y=function(r){return arguments.length?(o=r,e):o},e}export{sn as a,vn as b,gn as c,ln as e,rn as l,hn as p,fn as q};
